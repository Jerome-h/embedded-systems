Current code with 3 functions
